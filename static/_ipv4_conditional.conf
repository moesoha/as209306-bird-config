ipv4 table anycast4_condition;

protocol pipe anycast4_condition_pipe {
	table anycast4_condition;
	peer table master4;
	import filter {
		if net ~ [44.159.73.0/24{25,32}] then {
			# OSPF inter area only, router id not within global area should be router local services
			if source = RTS_OSPF && ospf_router_id ~ [44.159.73.0..44.159.73.255] then {
				accept;
			}
		}
		reject;
	};
	export filter {
		if net = 44.159.73.0/24 && dest != RTD_UNREACHABLE then {
			bgp_add_local_communities();
			bgp_large_community.add(BGPCOMM_FL_IS_SOHANET);
			bgp_community.add((4842, 10001));
			dest = RTD_UNREACHABLE; # revert to unreachable in master table
			accept;
		}
		reject;
	};
}

protocol static anycast4_condition_decision {
	ipv4 { table anycast4_condition; };
	route 44.159.73.0/24 recursive 44.159.73.0;
	route 44.159.73.0/24 recursive 44.159.73.1;
	route 44.159.73.0/24 recursive 44.159.73.2;
	route 44.159.73.0/24 recursive 44.159.73.3;
	route 44.159.73.0/24 recursive 44.159.73.4;
	route 44.159.73.0/24 recursive 44.159.73.5;
	route 44.159.73.0/24 recursive 44.159.73.6;
	route 44.159.73.0/24 recursive 44.159.73.7;
	route 44.159.73.0/24 recursive 44.159.73.8;
	route 44.159.73.0/24 recursive 44.159.73.9;
	route 44.159.73.0/24 recursive 44.159.73.10;
	route 44.159.73.0/24 recursive 44.159.73.11;
	route 44.159.73.0/24 recursive 44.159.73.12;
	route 44.159.73.0/24 recursive 44.159.73.13;
	route 44.159.73.0/24 recursive 44.159.73.14;
	route 44.159.73.0/24 recursive 44.159.73.15;
	route 44.159.73.0/24 recursive 44.159.73.16;
	route 44.159.73.0/24 recursive 44.159.73.17;
	route 44.159.73.0/24 recursive 44.159.73.18;
	route 44.159.73.0/24 recursive 44.159.73.19;
	route 44.159.73.0/24 recursive 44.159.73.20;
	route 44.159.73.0/24 recursive 44.159.73.21;
	route 44.159.73.0/24 recursive 44.159.73.22;
	route 44.159.73.0/24 recursive 44.159.73.23;
	route 44.159.73.0/24 recursive 44.159.73.24;
	route 44.159.73.0/24 recursive 44.159.73.25;
	route 44.159.73.0/24 recursive 44.159.73.26;
	route 44.159.73.0/24 recursive 44.159.73.27;
	route 44.159.73.0/24 recursive 44.159.73.28;
	route 44.159.73.0/24 recursive 44.159.73.29;
	route 44.159.73.0/24 recursive 44.159.73.30;
	route 44.159.73.0/24 recursive 44.159.73.31;
	route 44.159.73.0/24 recursive 44.159.73.32;
	route 44.159.73.0/24 recursive 44.159.73.33;
	route 44.159.73.0/24 recursive 44.159.73.34;
	route 44.159.73.0/24 recursive 44.159.73.35;
	route 44.159.73.0/24 recursive 44.159.73.36;
	route 44.159.73.0/24 recursive 44.159.73.37;
	route 44.159.73.0/24 recursive 44.159.73.38;
	route 44.159.73.0/24 recursive 44.159.73.39;
	route 44.159.73.0/24 recursive 44.159.73.40;
	route 44.159.73.0/24 recursive 44.159.73.41;
	route 44.159.73.0/24 recursive 44.159.73.42;
	route 44.159.73.0/24 recursive 44.159.73.43;
	route 44.159.73.0/24 recursive 44.159.73.44;
	route 44.159.73.0/24 recursive 44.159.73.45;
	route 44.159.73.0/24 recursive 44.159.73.46;
	route 44.159.73.0/24 recursive 44.159.73.47;
	route 44.159.73.0/24 recursive 44.159.73.48;
	route 44.159.73.0/24 recursive 44.159.73.49;
	route 44.159.73.0/24 recursive 44.159.73.50;
	route 44.159.73.0/24 recursive 44.159.73.51;
	route 44.159.73.0/24 recursive 44.159.73.52;
	route 44.159.73.0/24 recursive 44.159.73.53;
	route 44.159.73.0/24 recursive 44.159.73.54;
	route 44.159.73.0/24 recursive 44.159.73.55;
	route 44.159.73.0/24 recursive 44.159.73.56;
	route 44.159.73.0/24 recursive 44.159.73.57;
	route 44.159.73.0/24 recursive 44.159.73.58;
	route 44.159.73.0/24 recursive 44.159.73.59;
	route 44.159.73.0/24 recursive 44.159.73.60;
	route 44.159.73.0/24 recursive 44.159.73.61;
	route 44.159.73.0/24 recursive 44.159.73.62;
	route 44.159.73.0/24 recursive 44.159.73.63;
	route 44.159.73.0/24 recursive 44.159.73.64;
	route 44.159.73.0/24 recursive 44.159.73.65;
	route 44.159.73.0/24 recursive 44.159.73.66;
	route 44.159.73.0/24 recursive 44.159.73.67;
	route 44.159.73.0/24 recursive 44.159.73.68;
	route 44.159.73.0/24 recursive 44.159.73.69;
	route 44.159.73.0/24 recursive 44.159.73.70;
	route 44.159.73.0/24 recursive 44.159.73.71;
	route 44.159.73.0/24 recursive 44.159.73.72;
	route 44.159.73.0/24 recursive 44.159.73.73;
	route 44.159.73.0/24 recursive 44.159.73.74;
	route 44.159.73.0/24 recursive 44.159.73.75;
	route 44.159.73.0/24 recursive 44.159.73.76;
	route 44.159.73.0/24 recursive 44.159.73.77;
	route 44.159.73.0/24 recursive 44.159.73.78;
	route 44.159.73.0/24 recursive 44.159.73.79;
	route 44.159.73.0/24 recursive 44.159.73.80;
	route 44.159.73.0/24 recursive 44.159.73.81;
	route 44.159.73.0/24 recursive 44.159.73.82;
	route 44.159.73.0/24 recursive 44.159.73.83;
	route 44.159.73.0/24 recursive 44.159.73.84;
	route 44.159.73.0/24 recursive 44.159.73.85;
	route 44.159.73.0/24 recursive 44.159.73.86;
	route 44.159.73.0/24 recursive 44.159.73.87;
	route 44.159.73.0/24 recursive 44.159.73.88;
	route 44.159.73.0/24 recursive 44.159.73.89;
	route 44.159.73.0/24 recursive 44.159.73.90;
	route 44.159.73.0/24 recursive 44.159.73.91;
	route 44.159.73.0/24 recursive 44.159.73.92;
	route 44.159.73.0/24 recursive 44.159.73.93;
	route 44.159.73.0/24 recursive 44.159.73.94;
	route 44.159.73.0/24 recursive 44.159.73.95;
	route 44.159.73.0/24 recursive 44.159.73.96;
	route 44.159.73.0/24 recursive 44.159.73.97;
	route 44.159.73.0/24 recursive 44.159.73.98;
	route 44.159.73.0/24 recursive 44.159.73.99;
	route 44.159.73.0/24 recursive 44.159.73.100;
	route 44.159.73.0/24 recursive 44.159.73.101;
	route 44.159.73.0/24 recursive 44.159.73.102;
	route 44.159.73.0/24 recursive 44.159.73.103;
	route 44.159.73.0/24 recursive 44.159.73.104;
	route 44.159.73.0/24 recursive 44.159.73.105;
	route 44.159.73.0/24 recursive 44.159.73.106;
	route 44.159.73.0/24 recursive 44.159.73.107;
	route 44.159.73.0/24 recursive 44.159.73.108;
	route 44.159.73.0/24 recursive 44.159.73.109;
	route 44.159.73.0/24 recursive 44.159.73.110;
	route 44.159.73.0/24 recursive 44.159.73.111;
	route 44.159.73.0/24 recursive 44.159.73.112;
	route 44.159.73.0/24 recursive 44.159.73.113;
	route 44.159.73.0/24 recursive 44.159.73.114;
	route 44.159.73.0/24 recursive 44.159.73.115;
	route 44.159.73.0/24 recursive 44.159.73.116;
	route 44.159.73.0/24 recursive 44.159.73.117;
	route 44.159.73.0/24 recursive 44.159.73.118;
	route 44.159.73.0/24 recursive 44.159.73.119;
	route 44.159.73.0/24 recursive 44.159.73.120;
	route 44.159.73.0/24 recursive 44.159.73.121;
	route 44.159.73.0/24 recursive 44.159.73.122;
	route 44.159.73.0/24 recursive 44.159.73.123;
	route 44.159.73.0/24 recursive 44.159.73.124;
	route 44.159.73.0/24 recursive 44.159.73.125;
	route 44.159.73.0/24 recursive 44.159.73.126;
	route 44.159.73.0/24 recursive 44.159.73.127;
	route 44.159.73.0/24 recursive 44.159.73.128;
	route 44.159.73.0/24 recursive 44.159.73.129;
	route 44.159.73.0/24 recursive 44.159.73.130;
	route 44.159.73.0/24 recursive 44.159.73.131;
	route 44.159.73.0/24 recursive 44.159.73.132;
	route 44.159.73.0/24 recursive 44.159.73.133;
	route 44.159.73.0/24 recursive 44.159.73.134;
	route 44.159.73.0/24 recursive 44.159.73.135;
	route 44.159.73.0/24 recursive 44.159.73.136;
	route 44.159.73.0/24 recursive 44.159.73.137;
	route 44.159.73.0/24 recursive 44.159.73.138;
	route 44.159.73.0/24 recursive 44.159.73.139;
	route 44.159.73.0/24 recursive 44.159.73.140;
	route 44.159.73.0/24 recursive 44.159.73.141;
	route 44.159.73.0/24 recursive 44.159.73.142;
	route 44.159.73.0/24 recursive 44.159.73.143;
	route 44.159.73.0/24 recursive 44.159.73.144;
	route 44.159.73.0/24 recursive 44.159.73.145;
	route 44.159.73.0/24 recursive 44.159.73.146;
	route 44.159.73.0/24 recursive 44.159.73.147;
	route 44.159.73.0/24 recursive 44.159.73.148;
	route 44.159.73.0/24 recursive 44.159.73.149;
	route 44.159.73.0/24 recursive 44.159.73.150;
	route 44.159.73.0/24 recursive 44.159.73.151;
	route 44.159.73.0/24 recursive 44.159.73.152;
	route 44.159.73.0/24 recursive 44.159.73.153;
	route 44.159.73.0/24 recursive 44.159.73.154;
	route 44.159.73.0/24 recursive 44.159.73.155;
	route 44.159.73.0/24 recursive 44.159.73.156;
	route 44.159.73.0/24 recursive 44.159.73.157;
	route 44.159.73.0/24 recursive 44.159.73.158;
	route 44.159.73.0/24 recursive 44.159.73.159;
	route 44.159.73.0/24 recursive 44.159.73.160;
	route 44.159.73.0/24 recursive 44.159.73.161;
	route 44.159.73.0/24 recursive 44.159.73.162;
	route 44.159.73.0/24 recursive 44.159.73.163;
	route 44.159.73.0/24 recursive 44.159.73.164;
	route 44.159.73.0/24 recursive 44.159.73.165;
	route 44.159.73.0/24 recursive 44.159.73.166;
	route 44.159.73.0/24 recursive 44.159.73.167;
	route 44.159.73.0/24 recursive 44.159.73.168;
	route 44.159.73.0/24 recursive 44.159.73.169;
	route 44.159.73.0/24 recursive 44.159.73.170;
	route 44.159.73.0/24 recursive 44.159.73.171;
	route 44.159.73.0/24 recursive 44.159.73.172;
	route 44.159.73.0/24 recursive 44.159.73.173;
	route 44.159.73.0/24 recursive 44.159.73.174;
	route 44.159.73.0/24 recursive 44.159.73.175;
	route 44.159.73.0/24 recursive 44.159.73.176;
	route 44.159.73.0/24 recursive 44.159.73.177;
	route 44.159.73.0/24 recursive 44.159.73.178;
	route 44.159.73.0/24 recursive 44.159.73.179;
	route 44.159.73.0/24 recursive 44.159.73.180;
	route 44.159.73.0/24 recursive 44.159.73.181;
	route 44.159.73.0/24 recursive 44.159.73.182;
	route 44.159.73.0/24 recursive 44.159.73.183;
	route 44.159.73.0/24 recursive 44.159.73.184;
	route 44.159.73.0/24 recursive 44.159.73.185;
	route 44.159.73.0/24 recursive 44.159.73.186;
	route 44.159.73.0/24 recursive 44.159.73.187;
	route 44.159.73.0/24 recursive 44.159.73.188;
	route 44.159.73.0/24 recursive 44.159.73.189;
	route 44.159.73.0/24 recursive 44.159.73.190;
	route 44.159.73.0/24 recursive 44.159.73.191;
	route 44.159.73.0/24 recursive 44.159.73.192;
	route 44.159.73.0/24 recursive 44.159.73.193;
	route 44.159.73.0/24 recursive 44.159.73.194;
	route 44.159.73.0/24 recursive 44.159.73.195;
	route 44.159.73.0/24 recursive 44.159.73.196;
	route 44.159.73.0/24 recursive 44.159.73.197;
	route 44.159.73.0/24 recursive 44.159.73.198;
	route 44.159.73.0/24 recursive 44.159.73.199;
	route 44.159.73.0/24 recursive 44.159.73.200;
	route 44.159.73.0/24 recursive 44.159.73.201;
	route 44.159.73.0/24 recursive 44.159.73.202;
	route 44.159.73.0/24 recursive 44.159.73.203;
	route 44.159.73.0/24 recursive 44.159.73.204;
	route 44.159.73.0/24 recursive 44.159.73.205;
	route 44.159.73.0/24 recursive 44.159.73.206;
	route 44.159.73.0/24 recursive 44.159.73.207;
	route 44.159.73.0/24 recursive 44.159.73.208;
	route 44.159.73.0/24 recursive 44.159.73.209;
	route 44.159.73.0/24 recursive 44.159.73.210;
	route 44.159.73.0/24 recursive 44.159.73.211;
	route 44.159.73.0/24 recursive 44.159.73.212;
	route 44.159.73.0/24 recursive 44.159.73.213;
	route 44.159.73.0/24 recursive 44.159.73.214;
	route 44.159.73.0/24 recursive 44.159.73.215;
	route 44.159.73.0/24 recursive 44.159.73.216;
	route 44.159.73.0/24 recursive 44.159.73.217;
	route 44.159.73.0/24 recursive 44.159.73.218;
	route 44.159.73.0/24 recursive 44.159.73.219;
	route 44.159.73.0/24 recursive 44.159.73.220;
	route 44.159.73.0/24 recursive 44.159.73.221;
	route 44.159.73.0/24 recursive 44.159.73.222;
	route 44.159.73.0/24 recursive 44.159.73.223;
	route 44.159.73.0/24 recursive 44.159.73.224;
	route 44.159.73.0/24 recursive 44.159.73.225;
	route 44.159.73.0/24 recursive 44.159.73.226;
	route 44.159.73.0/24 recursive 44.159.73.227;
	route 44.159.73.0/24 recursive 44.159.73.228;
	route 44.159.73.0/24 recursive 44.159.73.229;
	route 44.159.73.0/24 recursive 44.159.73.230;
	route 44.159.73.0/24 recursive 44.159.73.231;
	route 44.159.73.0/24 recursive 44.159.73.232;
	route 44.159.73.0/24 recursive 44.159.73.233;
	route 44.159.73.0/24 recursive 44.159.73.234;
	route 44.159.73.0/24 recursive 44.159.73.235;
	route 44.159.73.0/24 recursive 44.159.73.236;
	route 44.159.73.0/24 recursive 44.159.73.237;
	route 44.159.73.0/24 recursive 44.159.73.238;
	route 44.159.73.0/24 recursive 44.159.73.239;
	route 44.159.73.0/24 recursive 44.159.73.240;
	route 44.159.73.0/24 recursive 44.159.73.241;
	route 44.159.73.0/24 recursive 44.159.73.242;
	route 44.159.73.0/24 recursive 44.159.73.243;
	route 44.159.73.0/24 recursive 44.159.73.244;
	route 44.159.73.0/24 recursive 44.159.73.245;
	route 44.159.73.0/24 recursive 44.159.73.246;
	route 44.159.73.0/24 recursive 44.159.73.247;
	route 44.159.73.0/24 recursive 44.159.73.248;
	route 44.159.73.0/24 recursive 44.159.73.249;
	route 44.159.73.0/24 recursive 44.159.73.250;
	route 44.159.73.0/24 recursive 44.159.73.251;
	route 44.159.73.0/24 recursive 44.159.73.252;
	route 44.159.73.0/24 recursive 44.159.73.253;
	route 44.159.73.0/24 recursive 44.159.73.254;
	route 44.159.73.0/24 recursive 44.159.73.255;
}
