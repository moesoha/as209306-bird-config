ipv4 table anycast4_condition;

protocol pipe anycast4_condition_pipe {
	table anycast4_condition;
	peer table master4;
	import filter {
		if net ~ [44.32.69.0/24{25,32}] then {
			# OSPF inter area only, router id not within global area should be router local services
			if source = RTS_OSPF && ospf_router_id ~ [44.32.69.0..44.32.69.255] then {
				accept;
			}
		}
		reject;
	};
	export filter {
		if net = 44.32.69.0/24 && dest != RTD_UNREACHABLE then {
			bgp_add_local_communities();
			bgp_large_community.add(BGPCOMM_FL_IS_SOHANET);
			bgp_community.add((4842, 10001));
			dest = RTD_UNREACHABLE; # revert to unreachable in master table
			accept;
		}
		reject;
	};
}

protocol static anycast4_condition_decision {
	ipv4 { table anycast4_condition; };
	route 44.32.69.0/24 recursive 44.32.69.0;
	route 44.32.69.0/24 recursive 44.32.69.1;
	route 44.32.69.0/24 recursive 44.32.69.2;
	route 44.32.69.0/24 recursive 44.32.69.3;
	route 44.32.69.0/24 recursive 44.32.69.4;
	route 44.32.69.0/24 recursive 44.32.69.5;
	route 44.32.69.0/24 recursive 44.32.69.6;
	route 44.32.69.0/24 recursive 44.32.69.7;
	route 44.32.69.0/24 recursive 44.32.69.8;
	route 44.32.69.0/24 recursive 44.32.69.9;
	route 44.32.69.0/24 recursive 44.32.69.10;
	route 44.32.69.0/24 recursive 44.32.69.11;
	route 44.32.69.0/24 recursive 44.32.69.12;
	route 44.32.69.0/24 recursive 44.32.69.13;
	route 44.32.69.0/24 recursive 44.32.69.14;
	route 44.32.69.0/24 recursive 44.32.69.15;
	route 44.32.69.0/24 recursive 44.32.69.16;
	route 44.32.69.0/24 recursive 44.32.69.17;
	route 44.32.69.0/24 recursive 44.32.69.18;
	route 44.32.69.0/24 recursive 44.32.69.19;
	route 44.32.69.0/24 recursive 44.32.69.20;
	route 44.32.69.0/24 recursive 44.32.69.21;
	route 44.32.69.0/24 recursive 44.32.69.22;
	route 44.32.69.0/24 recursive 44.32.69.23;
	route 44.32.69.0/24 recursive 44.32.69.24;
	route 44.32.69.0/24 recursive 44.32.69.25;
	route 44.32.69.0/24 recursive 44.32.69.26;
	route 44.32.69.0/24 recursive 44.32.69.27;
	route 44.32.69.0/24 recursive 44.32.69.28;
	route 44.32.69.0/24 recursive 44.32.69.29;
	route 44.32.69.0/24 recursive 44.32.69.30;
	route 44.32.69.0/24 recursive 44.32.69.31;
	route 44.32.69.0/24 recursive 44.32.69.32;
	route 44.32.69.0/24 recursive 44.32.69.33;
	route 44.32.69.0/24 recursive 44.32.69.34;
	route 44.32.69.0/24 recursive 44.32.69.35;
	route 44.32.69.0/24 recursive 44.32.69.36;
	route 44.32.69.0/24 recursive 44.32.69.37;
	route 44.32.69.0/24 recursive 44.32.69.38;
	route 44.32.69.0/24 recursive 44.32.69.39;
	route 44.32.69.0/24 recursive 44.32.69.40;
	route 44.32.69.0/24 recursive 44.32.69.41;
	route 44.32.69.0/24 recursive 44.32.69.42;
	route 44.32.69.0/24 recursive 44.32.69.43;
	route 44.32.69.0/24 recursive 44.32.69.44;
	route 44.32.69.0/24 recursive 44.32.69.45;
	route 44.32.69.0/24 recursive 44.32.69.46;
	route 44.32.69.0/24 recursive 44.32.69.47;
	route 44.32.69.0/24 recursive 44.32.69.48;
	route 44.32.69.0/24 recursive 44.32.69.49;
	route 44.32.69.0/24 recursive 44.32.69.50;
	route 44.32.69.0/24 recursive 44.32.69.51;
	route 44.32.69.0/24 recursive 44.32.69.52;
	route 44.32.69.0/24 recursive 44.32.69.53;
	route 44.32.69.0/24 recursive 44.32.69.54;
	route 44.32.69.0/24 recursive 44.32.69.55;
	route 44.32.69.0/24 recursive 44.32.69.56;
	route 44.32.69.0/24 recursive 44.32.69.57;
	route 44.32.69.0/24 recursive 44.32.69.58;
	route 44.32.69.0/24 recursive 44.32.69.59;
	route 44.32.69.0/24 recursive 44.32.69.60;
	route 44.32.69.0/24 recursive 44.32.69.61;
	route 44.32.69.0/24 recursive 44.32.69.62;
	route 44.32.69.0/24 recursive 44.32.69.63;
	route 44.32.69.0/24 recursive 44.32.69.64;
	route 44.32.69.0/24 recursive 44.32.69.65;
	route 44.32.69.0/24 recursive 44.32.69.66;
	route 44.32.69.0/24 recursive 44.32.69.67;
	route 44.32.69.0/24 recursive 44.32.69.68;
	route 44.32.69.0/24 recursive 44.32.69.69;
	route 44.32.69.0/24 recursive 44.32.69.70;
	route 44.32.69.0/24 recursive 44.32.69.71;
	route 44.32.69.0/24 recursive 44.32.69.72;
	route 44.32.69.0/24 recursive 44.32.69.73;
	route 44.32.69.0/24 recursive 44.32.69.74;
	route 44.32.69.0/24 recursive 44.32.69.75;
	route 44.32.69.0/24 recursive 44.32.69.76;
	route 44.32.69.0/24 recursive 44.32.69.77;
	route 44.32.69.0/24 recursive 44.32.69.78;
	route 44.32.69.0/24 recursive 44.32.69.79;
	route 44.32.69.0/24 recursive 44.32.69.80;
	route 44.32.69.0/24 recursive 44.32.69.81;
	route 44.32.69.0/24 recursive 44.32.69.82;
	route 44.32.69.0/24 recursive 44.32.69.83;
	route 44.32.69.0/24 recursive 44.32.69.84;
	route 44.32.69.0/24 recursive 44.32.69.85;
	route 44.32.69.0/24 recursive 44.32.69.86;
	route 44.32.69.0/24 recursive 44.32.69.87;
	route 44.32.69.0/24 recursive 44.32.69.88;
	route 44.32.69.0/24 recursive 44.32.69.89;
	route 44.32.69.0/24 recursive 44.32.69.90;
	route 44.32.69.0/24 recursive 44.32.69.91;
	route 44.32.69.0/24 recursive 44.32.69.92;
	route 44.32.69.0/24 recursive 44.32.69.93;
	route 44.32.69.0/24 recursive 44.32.69.94;
	route 44.32.69.0/24 recursive 44.32.69.95;
	route 44.32.69.0/24 recursive 44.32.69.96;
	route 44.32.69.0/24 recursive 44.32.69.97;
	route 44.32.69.0/24 recursive 44.32.69.98;
	route 44.32.69.0/24 recursive 44.32.69.99;
	route 44.32.69.0/24 recursive 44.32.69.100;
	route 44.32.69.0/24 recursive 44.32.69.101;
	route 44.32.69.0/24 recursive 44.32.69.102;
	route 44.32.69.0/24 recursive 44.32.69.103;
	route 44.32.69.0/24 recursive 44.32.69.104;
	route 44.32.69.0/24 recursive 44.32.69.105;
	route 44.32.69.0/24 recursive 44.32.69.106;
	route 44.32.69.0/24 recursive 44.32.69.107;
	route 44.32.69.0/24 recursive 44.32.69.108;
	route 44.32.69.0/24 recursive 44.32.69.109;
	route 44.32.69.0/24 recursive 44.32.69.110;
	route 44.32.69.0/24 recursive 44.32.69.111;
	route 44.32.69.0/24 recursive 44.32.69.112;
	route 44.32.69.0/24 recursive 44.32.69.113;
	route 44.32.69.0/24 recursive 44.32.69.114;
	route 44.32.69.0/24 recursive 44.32.69.115;
	route 44.32.69.0/24 recursive 44.32.69.116;
	route 44.32.69.0/24 recursive 44.32.69.117;
	route 44.32.69.0/24 recursive 44.32.69.118;
	route 44.32.69.0/24 recursive 44.32.69.119;
	route 44.32.69.0/24 recursive 44.32.69.120;
	route 44.32.69.0/24 recursive 44.32.69.121;
	route 44.32.69.0/24 recursive 44.32.69.122;
	route 44.32.69.0/24 recursive 44.32.69.123;
	route 44.32.69.0/24 recursive 44.32.69.124;
	route 44.32.69.0/24 recursive 44.32.69.125;
	route 44.32.69.0/24 recursive 44.32.69.126;
	route 44.32.69.0/24 recursive 44.32.69.127;
	route 44.32.69.0/24 recursive 44.32.69.128;
	route 44.32.69.0/24 recursive 44.32.69.129;
	route 44.32.69.0/24 recursive 44.32.69.130;
	route 44.32.69.0/24 recursive 44.32.69.131;
	route 44.32.69.0/24 recursive 44.32.69.132;
	route 44.32.69.0/24 recursive 44.32.69.133;
	route 44.32.69.0/24 recursive 44.32.69.134;
	route 44.32.69.0/24 recursive 44.32.69.135;
	route 44.32.69.0/24 recursive 44.32.69.136;
	route 44.32.69.0/24 recursive 44.32.69.137;
	route 44.32.69.0/24 recursive 44.32.69.138;
	route 44.32.69.0/24 recursive 44.32.69.139;
	route 44.32.69.0/24 recursive 44.32.69.140;
	route 44.32.69.0/24 recursive 44.32.69.141;
	route 44.32.69.0/24 recursive 44.32.69.142;
	route 44.32.69.0/24 recursive 44.32.69.143;
	route 44.32.69.0/24 recursive 44.32.69.144;
	route 44.32.69.0/24 recursive 44.32.69.145;
	route 44.32.69.0/24 recursive 44.32.69.146;
	route 44.32.69.0/24 recursive 44.32.69.147;
	route 44.32.69.0/24 recursive 44.32.69.148;
	route 44.32.69.0/24 recursive 44.32.69.149;
	route 44.32.69.0/24 recursive 44.32.69.150;
	route 44.32.69.0/24 recursive 44.32.69.151;
	route 44.32.69.0/24 recursive 44.32.69.152;
	route 44.32.69.0/24 recursive 44.32.69.153;
	route 44.32.69.0/24 recursive 44.32.69.154;
	route 44.32.69.0/24 recursive 44.32.69.155;
	route 44.32.69.0/24 recursive 44.32.69.156;
	route 44.32.69.0/24 recursive 44.32.69.157;
	route 44.32.69.0/24 recursive 44.32.69.158;
	route 44.32.69.0/24 recursive 44.32.69.159;
	route 44.32.69.0/24 recursive 44.32.69.160;
	route 44.32.69.0/24 recursive 44.32.69.161;
	route 44.32.69.0/24 recursive 44.32.69.162;
	route 44.32.69.0/24 recursive 44.32.69.163;
	route 44.32.69.0/24 recursive 44.32.69.164;
	route 44.32.69.0/24 recursive 44.32.69.165;
	route 44.32.69.0/24 recursive 44.32.69.166;
	route 44.32.69.0/24 recursive 44.32.69.167;
	route 44.32.69.0/24 recursive 44.32.69.168;
	route 44.32.69.0/24 recursive 44.32.69.169;
	route 44.32.69.0/24 recursive 44.32.69.170;
	route 44.32.69.0/24 recursive 44.32.69.171;
	route 44.32.69.0/24 recursive 44.32.69.172;
	route 44.32.69.0/24 recursive 44.32.69.173;
	route 44.32.69.0/24 recursive 44.32.69.174;
	route 44.32.69.0/24 recursive 44.32.69.175;
	route 44.32.69.0/24 recursive 44.32.69.176;
	route 44.32.69.0/24 recursive 44.32.69.177;
	route 44.32.69.0/24 recursive 44.32.69.178;
	route 44.32.69.0/24 recursive 44.32.69.179;
	route 44.32.69.0/24 recursive 44.32.69.180;
	route 44.32.69.0/24 recursive 44.32.69.181;
	route 44.32.69.0/24 recursive 44.32.69.182;
	route 44.32.69.0/24 recursive 44.32.69.183;
	route 44.32.69.0/24 recursive 44.32.69.184;
	route 44.32.69.0/24 recursive 44.32.69.185;
	route 44.32.69.0/24 recursive 44.32.69.186;
	route 44.32.69.0/24 recursive 44.32.69.187;
	route 44.32.69.0/24 recursive 44.32.69.188;
	route 44.32.69.0/24 recursive 44.32.69.189;
	route 44.32.69.0/24 recursive 44.32.69.190;
	route 44.32.69.0/24 recursive 44.32.69.191;
	route 44.32.69.0/24 recursive 44.32.69.192;
	route 44.32.69.0/24 recursive 44.32.69.193;
	route 44.32.69.0/24 recursive 44.32.69.194;
	route 44.32.69.0/24 recursive 44.32.69.195;
	route 44.32.69.0/24 recursive 44.32.69.196;
	route 44.32.69.0/24 recursive 44.32.69.197;
	route 44.32.69.0/24 recursive 44.32.69.198;
	route 44.32.69.0/24 recursive 44.32.69.199;
	route 44.32.69.0/24 recursive 44.32.69.200;
	route 44.32.69.0/24 recursive 44.32.69.201;
	route 44.32.69.0/24 recursive 44.32.69.202;
	route 44.32.69.0/24 recursive 44.32.69.203;
	route 44.32.69.0/24 recursive 44.32.69.204;
	route 44.32.69.0/24 recursive 44.32.69.205;
	route 44.32.69.0/24 recursive 44.32.69.206;
	route 44.32.69.0/24 recursive 44.32.69.207;
	route 44.32.69.0/24 recursive 44.32.69.208;
	route 44.32.69.0/24 recursive 44.32.69.209;
	route 44.32.69.0/24 recursive 44.32.69.210;
	route 44.32.69.0/24 recursive 44.32.69.211;
	route 44.32.69.0/24 recursive 44.32.69.212;
	route 44.32.69.0/24 recursive 44.32.69.213;
	route 44.32.69.0/24 recursive 44.32.69.214;
	route 44.32.69.0/24 recursive 44.32.69.215;
	route 44.32.69.0/24 recursive 44.32.69.216;
	route 44.32.69.0/24 recursive 44.32.69.217;
	route 44.32.69.0/24 recursive 44.32.69.218;
	route 44.32.69.0/24 recursive 44.32.69.219;
	route 44.32.69.0/24 recursive 44.32.69.220;
	route 44.32.69.0/24 recursive 44.32.69.221;
	route 44.32.69.0/24 recursive 44.32.69.222;
	route 44.32.69.0/24 recursive 44.32.69.223;
	route 44.32.69.0/24 recursive 44.32.69.224;
	route 44.32.69.0/24 recursive 44.32.69.225;
	route 44.32.69.0/24 recursive 44.32.69.226;
	route 44.32.69.0/24 recursive 44.32.69.227;
	route 44.32.69.0/24 recursive 44.32.69.228;
	route 44.32.69.0/24 recursive 44.32.69.229;
	route 44.32.69.0/24 recursive 44.32.69.230;
	route 44.32.69.0/24 recursive 44.32.69.231;
	route 44.32.69.0/24 recursive 44.32.69.232;
	route 44.32.69.0/24 recursive 44.32.69.233;
	route 44.32.69.0/24 recursive 44.32.69.234;
	route 44.32.69.0/24 recursive 44.32.69.235;
	route 44.32.69.0/24 recursive 44.32.69.236;
	route 44.32.69.0/24 recursive 44.32.69.237;
	route 44.32.69.0/24 recursive 44.32.69.238;
	route 44.32.69.0/24 recursive 44.32.69.239;
	route 44.32.69.0/24 recursive 44.32.69.240;
	route 44.32.69.0/24 recursive 44.32.69.241;
	route 44.32.69.0/24 recursive 44.32.69.242;
	route 44.32.69.0/24 recursive 44.32.69.243;
	route 44.32.69.0/24 recursive 44.32.69.244;
	route 44.32.69.0/24 recursive 44.32.69.245;
	route 44.32.69.0/24 recursive 44.32.69.246;
	route 44.32.69.0/24 recursive 44.32.69.247;
	route 44.32.69.0/24 recursive 44.32.69.248;
	route 44.32.69.0/24 recursive 44.32.69.249;
	route 44.32.69.0/24 recursive 44.32.69.250;
	route 44.32.69.0/24 recursive 44.32.69.251;
	route 44.32.69.0/24 recursive 44.32.69.252;
	route 44.32.69.0/24 recursive 44.32.69.253;
	route 44.32.69.0/24 recursive 44.32.69.254;
	route 44.32.69.0/24 recursive 44.32.69.255;
}
